(function(){Array.prototype.remove=function(e,t){var n;return n=this.slice((t||e)+1||this.length),this.length=e<0?this.length+e:e,this.push.apply(this,n)},Object.size=function(e){var t,n;n=0,t=void 0;for(t in e)e.hasOwnProperty(t)&&n++;return n},String.prototype.contains=function(e){return this.indexOf(e)!==-1},Array.prototype.hasObject=Array.indexOf?function(e){return this.indexOf(e)!==-1}:function(e){var t;return t=this.length+1,!function(){var n;n=[];while(t-=1)n.push(this[t-1]===e);return n}.call(this)?!1:!0},Array.prototype.each_slice=function(e,t){var n,r,i;n=0,r=this.length,i=[];while(n<r)t.call(this,this.slice(n,n+e)),i.push(n+=e);return i},Live.EventsRenderer=function(){function e(e){this.json_url=e.json_url+"?lang="+gon.locale+"&country_code="+gon.country_code+"&franchise_id="+gon.franchise_id,this.renderOneclickBar=function(e,t){var n,r;return t==null&&(t=!1),t==="true"?n="purple":n="orange",e.status==="progress"?r='<div class="progress-bar progress-bar-'+n+' progress-bar-striped active" style="width:100%;"><span>'+e.message+"</span></div>":e.status==="success"?r='<div class="alert alert-success alert-dismissible"><span>'+e.message+'</span><button type="button" class="close oneclick-alert-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>':r='<div class="alert alert-danger alert-dismissible"><span>'+e.message+'</span><button type="button" class="close oneclick-alert-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>',r},this.generate_events_data=function(e){var t,n=this;return window.live_time=e.time,t={groups:[]},e.events.forEach(function(r){var i,s,o,u,a,f,l,c,h,p,d,v;return s=null,t.groups.forEach(function(e){var t;r.group_date==="0"?t="0":t=moment(r.date_start).utc().zone(gon.tz_offset).format("YYYY-MM-DD");if(e.date===t)return s=e}),s||(r.group_date==="0"?d="0":d=moment(r.date_start).utc().zone(gon.tz_offset).format("YYYY-MM-DD"),f=!1,d==="0"&&(f=!0),s={date:d,live:f,sports:[]},t.groups.push(s)),o=null,s.sports.forEach(function(e){if(e.id===r.sport_id)return o=e}),o||(o={id:r.sport_id,name:r.sport_name,title:r.sport_title,tournaments:[]},s.sports.push(o)),u=null,o.tournaments.forEach(function(e){if(e.id===r.tournament_id)return u=e}),u||(u={id:r.tournament_id,country_name:r.country_name,name:r.tournament_name,comment:r.tournament_comment,live:r.tournament_live,player_1_text:r.player_1_text,player_2_text:r.player_2_text,draw_text:r.draw_text,has_three_main_odds:r.has_three_main_odds,has_assigned:!1,rating:r.tournament_rating,events:[]},o.tournaments.push(u)),typeof r.time_text=="undefined"?p="":p=r.time_text,c=0,r.stats&&(h=JSON.parse(r.stats),h&&h.calcTime&&h.calcTime.isRunnning&&(c=h.calcTime.ms)),l="",!s.live&&r.linked_id&&(l="assigned_",u.has_assigned=!0),i={id:r.id,date_start:r.date_start,is_soon:r.is_soon,inverted:r.inverted==="true",time_text:p,short_id:r.short_id,team1_name:r.team1_name,team2_name:r.team2_name,comment_text:r.comments,has_stream:r.has_stream,stream_url:r.stream_url,stats_url:r.stats_url,stats_present:r.stats_present,stats_time:r.stats_time,stats_text:r.stats_text,stats:r.stats,active_team:r.active_team,count:r.count,main_code:r.main_code,high_stakes:r.high_stakes,key1_odd_value:r[""+l+"key1_odd_value"],key1_event_odd_id:r[""+l+"key1_event_odd_id"],key1_odd_frozen:r[""+l+"key1_odd_frozen"],key2_odd_value:r[""+l+"key2_odd_value"],key2_event_odd_id:r[""+l+"key2_event_odd_id"],key2_odd_frozen:r[""+l+"key2_odd_frozen"],key3_odd_value:r[""+l+"key3_odd_value"],key3_event_odd_id:r[""+l+"key3_event_odd_id"],key3_odd_frozen:r[""+l+"key3_odd_frozen"],max_amount:r.max_amount,linked_id:r.linked_id,linked_short_id:r.linked_short_id,ms:c,stream_source:r.stream_source,filters:[]},window.oneclick_alerts.events[i.id]&&(i.oneclick_bar=n.renderOneclickBar(window.oneclick_alerts.events[i.id],i.high_stakes)),u.events.push(i),a=r.odds[0]&&((v=r.odds[0].filter_id)==="103"||v==="104"||v==="146"||v==="147"||v==="148"||v==="149"||v==="150"||v==="151"||v==="152"||v==="153"||v==="154"),a&&(r.odds=r.odds.sort(function(e,t){var n,r;return n=parseFloat(e.odd_value),r=parseFloat(t.odd_value),n<r?-1:n>r?1:0})),r.odds.forEach(function(t){var r,s,o;return a&&(t.team_name=t.team_name.split(" - ")[0]),r=null,i.filters.forEach(function(e){if(e.id===t.filter_id)return r=e}),r||(r={id:t.filter_id,title:e.filters[t.filter_id].title,rows:[]},i.filters.push(r)),o=null,r.rows.forEach(function(e){if(e.id===t.row_id||a)return o=e}),o||(o={id:t.row_id,order_num:t.row_id,odds:[]},r.rows.push(o)),s={odd_value:t.odd_value,id:t.id,order_num:t.order_num,additional_value:t.additional_value,additional_value_raw:t.additional_value_raw,team_name:t.team_name,team_name2:t.team_name2,team_info:t.team_info,code:t.code,player_tag:window.player_odds[t.code],player_team:parseInt(t.player_team),frozen:t.frozen,filter:t.filter_id},window.oneclick_alerts.event_odds[s.id]&&(s.oneclick_bar=n.renderOneclickBar(window.oneclick_alerts.event_odds[s.id],i.high_stakes)),o.odds.push(s),r.player_tag=window.player_odds[r.rows[0].odds[0].code]!=null})}),t},this.reorderAllItems=function(){return events_view.reorderGroups(),events_view.groups().forEach(function(e){return e.reorderSports(),e.sports().forEach(function(e){return e.reorderTournaments(),e.tournaments().forEach(function(e){return e.reorderEvents(),e.events().forEach(function(e){return e.reorderFilters(),e.filters().forEach(function(e){return e.reorderRows(),e.rows().forEach(function(e){return e.reorderOdds()})})})})})})},this.update=function(){var e,t,n,r=this;return e=$("#events_with_filters").css("height"),$("#events_with_filters").css("height",e),this.stopTimer(),clearTimeout(window.events_timeout),t="",window.filters_view.expanded_filters().length>0&&(t=t+"&filters="+window.filters_view.expanded_filters().join(",")),window.menu_view.expanded_events().length>0&&(t=t+"&events="+window.menu_view.expanded_events().join(",")),window.menu_view.expanded_sports().length>0&&(t=t+"&sports="+window.menu_view.expanded_sports().join(",")),window.menu_view.expanded_hsports().length>0&&(t=t+"&hsports="+window.menu_view.expanded_hsports().join(",")),n=window.filters_view.preopen,$.get(this.json_url+t,function(e){var t;return e.constructor===String&&(e=JSON.parse(e)),t=r.generate_events_data(e),window.events_view.groups().forEach(function(e){return e.sports().forEach(function(e){return e.tournaments().forEach(function(e){return e.events().forEach(function(e){return e.filters().forEach(function(e){return e.rows().forEach(function(e){return e.odds.removeAll()}),e.rows.removeAll()}),e.filters.removeAll()}),e.events.removeAll()}),e.tournaments.removeAll()}),e.sports.removeAll()}),window.events_view.groups.removeAll(),window.menu_view.sports().forEach(function(e){return e.menu_events.removeAll()}),window.menu_view.sports.removeAll(),window.filters_view.filters.removeAll(),window.sports_view.sports.removeAll(),window.events_view.fill_data(t),window.filters_view.fill_data(e.filters),window.menu_view.fill_data(e.all_events),window.sports_view.fill_data(e.sports),window.events_view.oneclick_enabled()&&$('[data-toggle="tooltip"]').tooltip(),window.filters_view.expanded(window.filters_view.preopen),$("#events_with_filters").css("height","auto"),r.reorderAllItems(),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),typeof scrolltotop_position_check!="undefined"&&scrolltotop_position_check!==null&&scrolltotop_position_check&&scrolltotop_position_check(),r.startTimer(),window.events_timeout=setTimeout(function(){return window.renderer.update()},4e3)})},this.render=function(){var e,t,n=this;return window.odds={},window.main_odds={},t="",gon.sport_id?e=this.json_url+"&sports="+gon.sport_id:gon.hsport_id?e=this.json_url+"&hsports="+gon.hsport_id:t.length>0?e=this.json_url+t:e=this.json_url,$.get(e,function(e){var t,r,i,s,o,u,a;return e.constructor===String&&(e=JSON.parse(e)),o=n.generate_events_data(e),window.filters_view=new Live.Views.Filters(e.filters),r=document.getElementById("live_filters_view"),window.events_view=new Live.Views.Events(o,filters_view),t=document.getElementById("live_events_view"),$.cookie("current_sport",null),window.sports_view=new Live.Views.Sports(e.sports),a=document.getElementById("sports_view"),window.menu_view=new Live.Views.Menu(e.all_events),gon.sport_id&&window.menu_view.expanded_sports.push(parseInt(gon.sport_id)),gon.hsport_id&&window.menu_view.expanded_hsports.push(parseInt(gon.hsport_id)),s=document.getElementById("live-menu-holder"),ko.applyBindings(window.events_view,t),r&&ko.applyBindings(window.filters_view,r),ko.applyBindings(window.menu_view,s),a&&ko.applyBindings(window.sports_view,a),window.events_view.oneclick_enabled()&&$('[data-toggle="tooltip"]').tooltip(),gon.sport_id&&(u=gon.sport_id,delete gon.sport_id,window.menu_view.sports().forEach(function(e){if(parseInt(u)===e.id&&!e.high_stakes())return e.toggle()})),gon.hsport_id&&(i=gon.hsport_id,delete gon.hsport_id,window.menu_view.sports().forEach(function(e){if(parseInt(i)===e.id&&e.high_stakes()===!0)return e.toggleHS()})),n.reorderAllItems(),$("#live-menu-holder").show(),$("#events_with_filters").show(),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),typeof scrolltotop_position_check!="undefined"&&scrolltotop_position_check!==null&&scrolltotop_position_check&&scrolltotop_position_check(),n.startTimer(),window.events_timeout=setTimeout(function(){return window.renderer.update()},4e3)})},this.startTimer=function(){var e=this;return window.timer_timeout=setTimeout(function(){var t;return t=window.events_view.groups()[0],t.live&&t.sports().forEach(function(e){return e.events().forEach(function(t){var n;if(t.ms()&&t.isRunnning())return n=JSON.parse(t.stats()),e.id===1&&(n.calcTime.ms=n.calcTime.ms-1e3),e.id===2&&(n.calcTime.ms=parseInt(n.calcTime.ms)+1e3),t.stats(JSON.stringify(n))})}),e.startTimer()},1e3)},this.stopTimer=function(){return clearTimeout(window.timer_timeout)}}return e}()}).call(this),function(){Live.Models.Event=function(){function e(e,t){var n,r=this;this.tournament=t,this.id=parseInt(e.id),this.is_soon=e.is_soon==="true",this.time_text=ko.observable(e.time_text),this.short_id=e.short_id,this.team1_name=ko.observable(e.team1_name),this.team2_name=ko.observable(e.team2_name),this.comment_text=ko.observable(e.comment_text),this.has_stream=ko.observable(e.has_stream==="true"),this.stream_url=ko.observable(e.stream_url),this.img_dge=ko.observable(e.stream_source==="img_dge"),this.img_perform=ko.observable((n=e.stream_source)==="perform"||n==="perform_web"||n==="perform_mobile"),this.stats_url=ko.observable(e.stats_url),this.stats_present=e.stats_present,this.stats_time=ko.observable(e.stats_time),this.stats_text=ko.observable(e.stats_text),this.stats=ko.observable(e.stats),this.active_team=ko.observable(e.active_team),this.count=ko.observable(e.count),this.main_code=e.main_code,this.high_stakes=ko.observable(e.high_stakes==="true"),this.has_regular=ko.observable(!1),this.key1_odd_value=ko.observable(e.key1_odd_value),this.key1_odd_up=ko.observable(!1),this.key1_odd_down=ko.observable(!1),this.key1_event_odd_id=ko.observable(e.key1_event_odd_id),this.key1_odd_frozen=ko.observable(e.key1_odd_frozen==="true"||e.key1_odd_frozen==null),this.key2_odd_value=ko.observable(e.key2_odd_value),this.key2_event_odd_id=ko.observable(e.key2_event_odd_id),this.key2_odd_up=ko.observable(!1),this.key2_odd_down=ko.observable(!1),this.key2_odd_frozen=ko.observable(e.key2_odd_frozen==="true"||e.key2_odd_frozen==null),this.key3_odd_value=ko.observable(e.key3_odd_value),this.key3_event_odd_id=ko.observable(e.key3_event_odd_id),this.key3_odd_up=ko.observable(!1),this.key3_odd_down=ko.observable(!1),this.key3_odd_frozen=ko.observable(e.key3_odd_frozen==="true"||e.key3_odd_frozen==null),this.hidden=ko.observable(!1),this.date_start=ko.observable(e.date_start),this.checked=ko.observable(!1),this.max_amount=parseInt(e.max_amount),this.linked_id=parseInt(e.linked_id),this.linked_short_id=parseInt(e.linked_short_id),this.ms=ko.observable(e.ms),this.isRunnning=ko.observable(!1),this.inverted=ko.observable(e.inverted),this.oneclick_bar=ko.observable(e.oneclick_bar),this.key1_event_odd_id()&&(window.main_odds[this.key1_event_odd_id()]&&(window.main_odds[this.key1_event_odd_id()]>parseFloat(this.key1_odd_value())?this.key1_odd_down(!0):window.main_odds[this.key1_event_odd_id()]<parseFloat(this.key1_odd_value())&&this.key1_odd_up(!0)),window.main_odds[this.key1_event_odd_id()]=parseFloat(this.key1_odd_value())),this.key2_event_odd_id()&&(window.main_odds[this.key2_event_odd_id()]&&(window.main_odds[this.key2_event_odd_id()]>parseFloat(this.key2_odd_value())?this.key2_odd_down(!0):window.main_odds[this.key2_event_odd_id()]<parseFloat(this.key2_odd_value())&&this.key2_odd_up(!0)),window.main_odds[this.key2_event_odd_id()]=parseFloat(this.key2_odd_value())),this.key3_event_odd_id()&&(window.main_odds[this.key3_event_odd_id()]&&(window.main_odds[this.key3_event_odd_id()]>parseFloat(this.key3_odd_value())?this.key3_odd_down(!0):window.main_odds[this.key3_event_odd_id()]<parseFloat(this.key3_odd_value())&&this.key3_odd_up(!0)),window.main_odds[this.key3_event_odd_id()]=parseFloat(this.key3_odd_value())),this.tournament.sport.group.parent?this.odd_format=this.tournament.sport.group.parent.odd_format:this.odd_format=this.tournament.sport.group.odd_format,this.formatOdd=function(e){var t;return e=parseFloat(e),t=e>1&&e<1.01?3:2,this.odd_format==="uk"?Ratio.parse(parseFloat(e-1).toFixed(t)).simplify().toString():this.odd_format==="us"?e<=1?0:e<=2?-Math.round(100/(e-1)):"+"+Math.round(100*(e-1)):e.toFixed(t)},this.main_code_regexp=ko.computed(function(){return new RegExp("^"+this.main_code+"(.)$")},this),this.key1_formatted_odd_value=ko.computed(function(){return this.formatOdd(this.key1_odd_value())},this),this.key2_formatted_odd_value=ko.computed(function(){return this.formatOdd(this.key2_odd_value())},this),this.key3_formatted_odd_value=ko.computed(function(){return this.formatOdd(this.key3_odd_value())},this),this.reorderFilters=function(){return this.filters.sort(function(e,t){return e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1})},this.filters=ko.observableArray([]),e.filters&&e.filters.forEach(function(e){var t;return t=new Live.Models.Filter(e,r),r.filters().push(t),r.reorderFilters(),r.tournament.sport.group.parent.filters().push(t)}),this.toggle=function(e){var t,n;return e==null&&(e=null),t=parseInt(this.id),n=window.menu_view.expanded_events().indexOf(t),this.checked()?n>-1&&window.menu_view.expanded_events.remove(t):n<0&&window.menu_view.expanded_events.push(t),this.checked(!this.checked()),window.renderer.update()},this.millisToMinutesAndSeconds=function(e){var t,n,r;return e<0?"00:00":(r=e/1e3,t=Math.floor(r/60),n=Math.floor(r-t*60),t<10&&(t="0"+t),n<10&&(n="0"+n),""+t+":"+n)},this.short_id_computed=ko.computed(function(){return this.linked_id>0&&this.linked_short_id>0&&!this.tournament.sport.group.live?this.linked_short_id:this.short_id},this),this.colspan=ko.computed(function(){if(!this.tournament.has_assigned)return 0;if(this.linked_id&&this.tournament.has_three_main_odds)return 0;if(this.linked_id&&!this.tournament.has_three_main_odds)return 2;if(!this.linked_id)return 4},this),this.formatted_date_start=ko.computed(function(){return moment(this.date_start()).zone(gon.tz_offset).lang(gon.locale).format("MMM D   HH:mm")},this),this.path=ko.computed(function(){return"/event/"+this.id},this),this.event_title=ko.computed(function(){return""+this.team1_name()+" - "+this.team2_name()},this),this.team1_name_computed=ko.computed(function(){var e;return parseInt(this.active_team())===1?e=" *":e="",""+this.team1_name()+e},this),this.team2_name_computed=ko.computed(function(){var e;return parseInt(this.active_team())===2?e=" *":e="",""+this.team2_name()+e},this),this.computed_stats_present=ko.computed(function(){var e,t;if(!(this.stats()!=null&&this.stats().length>0))return!1;try{return t=JSON.parse(this.stats()),t.p!=null?!0:t.current!=null&&this.tournament.sport.id===17?!0:t.calcTime==null||this.tournament.sport.id!==1&&this.tournament.sport.id!==2?t.period!=null&&t.time!=null?!0:t.total!=null&&this.tournament.sport.id===59?!0:!1:!0}catch(n){return e=n,!1}},this),this.stats_computed=ko.computed(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;if(!this.computed_stats_present())return"";try{x=JSON.parse(this.stats())}catch(A){return r=A,""}if(this.tournament.sport.name==="football"){x.time?T=x.time:T="",x.total?(k=parseInt(x.total.T1)||0,k<0&&(k=0),L=parseInt(x.total.T2)||0,k<0&&(L=0),C=""+k+"-"+L):C="0-0";if(x.calcTime){o=parseInt(x.calcTime.ms);if(x.calcTime.isRunnning===!1||x.calcTime.isRunnning==="False")this.isRunnning(!1),N=this.millisToMinutesAndSeconds(o);else if(x.calcTime.isRunnning===!0||x.calcTime.isRunnning==="True")this.isRunnning(!0),s=Number(window.live_time),S=moment(x.calcTime.tm+" +0000"),T=s-S+o,T=this.millisToMinutesAndSeconds(T)}return""+T+"   "+C}if(this.tournament.sport.name==="tennis"){x.p!=null?(m=Object.size(x.p)||1,m<1&&(m=1)):m=1,g=gon.tennis_set_translations[m],x.current!=null&&Object.keys(x.current).length>0?(x.current.T1==="A"?k="A":k=parseInt(x.current.T1)||0,x.current.T2==="A"?L="A":L=parseInt(x.current.T2)||0,C=""+k+"-"+L):C="0-0",v=[];if(x.p!=null&&Object.keys(x.p).length>0){i=1;while(i<=m)h=parseInt(x.p[i].T1)||0,p=parseInt(x.p[i].T2)||0,v.push(""+h+"-"+p),i++}else v.push("0-0");return""+g+"   "+C+" ("+v.join(", ")+")"}if(this.tournament.sport.name==="volleyball"||this.tournament.sport.name==="beach-volleyball"||this.tournament.sport.name==="badminton"){x.p!=null?(m=Object.size(x.p)||1,m<1&&(m=1)):m=1,g=gon.volleyball_set_translations[m],e={T1:0,T2:0};if(x.p!=null&&Object.keys(x.p).length>0){x.p[m]&&(e=x.p[m],delete x.p[m]);if(typeof e.T1=="undefined"||parseInt(e.T1)<0)e.T1=0;if(typeof e.T2=="undefined"||parseInt(e.T2)<0)e.T2=0;v=[];if(m!==0){i=1;while(i<=m)x.p[i]&&(h=parseInt(x.p[i].T1)||0,p=parseInt(x.p[i].T2)||0,v.push(""+h+"-"+p)),i++}return v.length>0?d=" ("+v.join(", ")+")":d="",""+g+"   "+e.T1+"-"+e.T2+d}return""+g}y=parseInt(this.tournament.sport.id),b=this.tournament.sport.name,parseFloat(x.period)%1!==0?u=!0:u=!1,t=parseInt(x.period),l=parseInt(x.periods_count),b==="basketball"&&t>4||b==="ice_hockey"&&t>3?a="":a=t,b==="basketball"&&parseInt(this.tournament.id)===30?c=gon.ncaa_quarter_translation:b==="basketball"&&t>4||b==="ice_hockey"&&t>3||l>0&&t>l?c=gon.overtime_short_translations[String(y)]:c=gon.quarter_short_translations[String(y)];if(typeof c=="undefined"||c.contains("translation missing"))c=gon.scorebox_quarter_short_translation;x.total!=null&&Object.keys(x.total).length>0?(h=parseInt(x.total.T1)||0,h<0&&(h=0),p=parseInt(x.total.T2)||0,p<0&&(p=0)):(h=0,p=0),a!=null&&y!==59?f=""+a+" "+c+" ":f="";if(this.tournament.sport.name==="basketball"&&x.calcTime){o=parseInt(x.calcTime.ms);if(x.calcTime.isRunnning===!1||x.calcTime.isRunnning==="False")this.isRunnning(!1),N=this.millisToMinutesAndSeconds(o);else if(x.calcTime.isRunnning===!0||x.calcTime.isRunnning==="True")this.isRunnning(!0),S=moment(x.calcTime.send+" +0000"),E=moment(x.calcTime.tm+" +0000"),w=S-E,w>6e5?T=o:T=o-w,s=Number(window.live_time),n=s-S,N=this.millisToMinutesAndSeconds(T-n)}else x.time!=null?N=""+x.time+"  ":N="";return u?""+gon.intermission+" "+h+"-"+p:""+f+N+" "+h+"-"+p},this)}return e}()}.call(this),function(){Live.Models.Filter=function(){function e(e,t){var n=this;this.event=t,this.id=parseInt(e.id),this.title=e.title,this.player_tag=e.player_tag,this.order_num=parseInt(e.id),this.expanded=ko.observable(!1),this.reorderRows=function(){return this.rows.sort(function(e,t){return e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1})},this.grouped_odds=ko.computed(function(){var t;return t=!1,e.rows.forEach(function(e){return e.odds.forEach(function(e){var n,r,i,s;if(e.filter==="11"&&/^ODD_SCORES_(\d+_\d+|OTHER)$/.test(e.code)||((n=e.filter)==="113"||n==="114")&&/^ODD_HT._SCORES_(\d+_\d+|OTHER)$/.test(e.code)||(r=e.filter)==="100"||r==="101"||r==="102"||((i=e.filter)==="89"||i==="90"||i==="91"||i==="92"||i==="93")&&/^ODD_TENNIS_SET\d_SCORE_((\d+)_(\d+)|OTHER)/.test(e.code)||(s=e.filter)==="103"||s==="104"||s==="146"||s==="147"||s==="148"||s==="149"||s==="150"||s==="151"||s==="152"||s==="153"||s==="154")return t=!0})}),t},this),this.grouped_rows=ko.computed(function(){var t,n,r,i,s,o,u,a,f,l=this;o=[],f=[[],[],[]],r=!0,e.rows.sort(function(e,t){return e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1}),e.rows.forEach(function(e){return e.odds.forEach(function(e,t){var n,i,s,u,a,l,c,h,p;n=e.code,i=!1;if(e.filter==="11"&&/^ODD_SCORES_(\d+_\d+|OTHER)$/.test(n))a=n.scan(/^ODD_SCORES_((\d+)_(\d+)|OTHER)$/g)[0],a[1]&&a[2]?parseInt(a[1])>parseInt(a[2])?s=1:parseInt(a[1])<parseInt(a[2])?s=3:s=2:s=2,i=!0;else if((l=e.filter)!=="113"&&l!=="114"||!/^ODD_HT._SCORES_(\d+_\d+|OTHER)$/.test(n))if((c=e.filter)==="100"||c==="101"||c==="102")u=!0,/^ODD_PER[123]_SCORES_((\d+)_(\d+)|OTHER)$/.test(n)?(a=n.scan(/^ODD_PER[123]_SCORES_((\d+)_(\d+)|OTHER)$/g)[0],a[1]&&a[2]?parseInt(a[1])>parseInt(a[2])?s=1:parseInt(a[1])<parseInt(a[2])?s=3:s=2:s=2):s=parseInt(rows[0].group_order_num)+1,i=!0;else if((h=e.filter)!=="89"&&h!=="90"&&h!=="91"&&h!=="92"&&h!=="93"||!/^ODD_TENNIS_SET\d_SCORE_((\d+)_(\d+)|OTHER)/.test(n)){if((p=e.filter)==="103"||p==="104"||p==="146"||p==="147"||p==="148"||p==="149"||p==="150"||p==="151"||p==="152"||p==="153"||p==="154")u=!0,i=!0,s=t%2+1,r=!1}else u=!0,a=n.scan(/^ODD_TENNIS_SET\d_SCORE_(?:(\d+)_(\d+)|OTHER)_?(\d)?$/g)[0],a[0]&&a[1]?parseInt(a[0])>parseInt(a[1])?s=1:parseInt(a[0])<parseInt(a[1])&&(s=2):a[2]?parseInt(a[2])===1?s=1:s=2:s=2,i=!0;else u=!0,a=n.scan(/^ODD_HT._SCORES_((\d+)_(\d+)|OTHER)$/g)[0],a[1]&&a[2]?parseInt(a[1])>parseInt(a[2])?s=1:parseInt(a[1])<parseInt(a[2])?s=3:s=2:s=2,i=!0;if(i){s!==0&&f[s-1].push(e);if(o.indexOf(s)<0)return o.push(s)}})}),i=[],a=Math.max(f[0].length,f[1].length,f[2].length);if(a!==0){s=0;if(r)while(s<3)f[s].sort(function(e,t){return e.code>t.code}),s+=1;t={};while(a>0)u=o.sort(),o.length===3?i.push({odds:[f[u[0]-1].shift()||t,f[u[1]-1].shift()||t,f[u[2]-1].shift()||t]}):o.length===2?i.push({odds:[f[u[0]-1].shift()||t,f[u[1]-1].shift()||t]}):o.length===1&&i.push({odds:[f[u[0]-1].shift()||t]}),a-=1}return n=[],i&&i.forEach(function(e){var t,r,i,o,u,a;r=new Live.Models.Row(e,l),t=new Live.Models.Row(e,l),a=e.odds;for(s=o=0,u=a.length;o<u;s=++o)i=a[s],i.id===void 0?r.odds().forEach(function(e){if(isNaN(e.id))return t.odds()[s]=e}):r.odds().forEach(function(e){if(e.id===parseInt(i.id))return t.odds()[s]=e});return n.push(t)}),n},this),this.rows=ko.observableArray([]),e.rows&&e.rows.forEach(function(e){return n.rows().push(new Live.Models.Row(e,n))}),this.toggle=function(){return this.expanded()===!0?(this.expanded(!1),$("#odd_filter_"+this.id).prop("checked",!1)):(this.expanded(!0),$("#odd_filter_"+this.id).prop("checked",!0))}}return e}()}.call(this),function(){Live.Models.FiltersFilter=function(){function e(e){this.id=parseInt(e.id),this.title=e.title,this.order_num=parseInt(e.id),this.col=ko.observable(0),this.count=e.count,this.expanded=ko.observable(!1),this.loadFilter=function(){var e,t;return t=$('[for="odd_filter_'+this.id+'"]'),t.addClass("withLoader"),this.expanded()?(this.expanded(!1),e=window.filters_view.expanded_filters().indexOf(this.id),e>-1&&window.filters_view.expanded_filters.remove(this.id)):(this.expanded(!0),e=window.filters_view.expanded_filters().indexOf(this.id),e<0&&window.filters_view.expanded_filters.push(this.id)),window.filters_view.preopen=!0,window.renderer.update()}}return e}()}.call(this),function(){Live.Models.Group=function(){function e(e,t){var n=this;this.parent=t,this.date=e.date,this.live=e.live,this.sports=ko.observableArray([]),this.hidden=ko.observable(!1),e.sports&&e.sports.forEach(function(e){return n.sports().push(new Live.Models.Sport(e,n))}),this.reorderSports=function(){var e=this;return this.sports.sort(function(t,n){var r,i,s,o;return e.live?(i=t.max_amount(),o=n.max_amount(),r=t.id,s=n.id,i===o?r<s?-1:r>s?1:0:i<o?1:-1):t.id===n.id?0:t.id<n.id?-1:1})}}return e}()}.call(this),function(){Live.Models.MenuEvent=function(){function e(e,t){var n,r=this;this.sport=t,this.id=parseInt(e.id),this.title=e.title,this.date_start=ko.observable(e.date_start),this.high_stakes=ko.observable(e.high_stakes==="true"),this.path="/event/"+e.id,this.checked=ko.observable(!1),this.max_amount=parseInt(e.max_amount),this.has_stream=ko.observable(e.has_stream==="true"),this.img_dge=ko.observable(e.stream_source==="img_dge"),this.img_perform=ko.observable((n=e.stream_source)==="perform"||n==="perform_web"||n==="perform_mobile"),this.toggle=function(){var e;return $("label[for=checkboxEvent"+r.id+"] a").addClass("withLoader"),r.checked()?(r.checked(!1),e=window.menu_view.expanded_events().indexOf(r.id),e>-1&&window.menu_view.expanded_events.remove(r.id),r.sport.checked(!1),e=window.menu_view.expanded_sports().indexOf(r.sport.id),e>-1&&window.menu_view.expanded_sports.remove(r.sport.id),e>-1&&window.menu_view.expanded_hsports.remove(r.sport.id)):(r.checked(!0),e=window.menu_view.expanded_events().indexOf(r.id),e<0&&window.menu_view.expanded_events.push(r.id)),$.cookie("expanded_events",window.menu_view.expanded_events()),$.cookie("expanded_sports",window.menu_view.expanded_sports()),$.cookie("expanded_hsports",window.menu_view.expanded_hsports()),window.menu_view.expanded_sports().length>0&&window.menu_view.expanded_sports().indexOf(r.sport.id)===-1&&window.sports_view.set_current(0),window.renderer.update()}}return e}()}.call(this),function(){Live.Models.MenuSport=function(){function e(e){var t=this;this.id=parseInt(e.id),this.name=e.name,this.title=e.title,this.active=ko.observable(e.active),this.toggle=function(){return window.sports_view.set_current(t.id),window.menu_view.expanded_events([]),window.menu_view.expanded_sports([t.id]),window.menu_view.expanded_hsports([t.id]),window.renderer.update(),!1},this.id===1001?this.class_name="icon-tv":this.class_name="icon-"+this.name+" sport-"+this.id}return e}()}.call(this),function(){Live.Models.Odd=function(){function e(e,t){var n,r;this.row=t,this.odd_value=ko.observable(e.odd_value),this.id=parseInt(e.id),this.order_num=parseInt(e.order_num),this.additional_value=ko.observable(e.team_info),this.additional_value_raw=ko.observable(e.additional_value_raw),this.team_name=e.team_name,this.team_name2=e.team_name2,this.player_tag=e.player_tag,this.player_team=e.player_team,this.code=e.code,this.up=ko.observable(!1),this.down=ko.observable(!1),this.frozen=ko.observable(e.frozen==="true"),this.frozen()===!0?this.span_class=" ":this.span_class=" price",this.oneclick_bar=ko.observable(e.oneclick_bar),window.odds[this.id]&&(window.odds[this.id]>parseFloat(this.odd_value())?this.down(!0):window.odds[this.id]<parseFloat(this.odd_value())&&this.up(!0)),window.odds[this.id]=parseFloat(this.odd_value()),this.odd_format=this.row.filter.event.tournament.sport.group.parent.odd_format,this.formatted_odd_value=ko.computed(function(){var e,t;return t=parseFloat(this.odd_value()),e=t>1&&t<1.01?3:2,this.odd_format==="uk"?Ratio.parse(parseFloat(t-1).toFixed(e)).simplify().toString():this.odd_format==="us"?t<=1?0:t<=2?-Math.round(100/(t-1)):Math.round(100*(t-1)):t.toFixed(e)},this);if(this.row.filter.id===1){n=this.row.filter.event,n.main_code_regexp().test(this.code)&&n.has_regular(!0);if(n.has_regular()&&n.main_code_regexp().test(this.code)||!n.has_regular()&&/^ODD_S(.)$/.test(this.code))r=parseInt(this.order_num)+1,n["key"+r+"_odd_value"](this.odd_value()),n["key"+r+"_event_odd_id"](this.id)}this.destroy=function(){var e,t,n=this;this.row.odds.remove(this),this.row.filter.id!==1&&this.row.filter.event.count(parseInt(this.row.filter.event.count())-1);if(this.row.filter.id===1){e=this.row.filter.event.has_regular(),t=this.row.filter.event.main_code_regexp();if(e&&t.test(this.code)||!e&&/^ODD_S(.)$/.test(this.code))this.row.filter.event["key"+(this.order_num+1)+"_odd_value"](null),this.row.filter.event["key"+(this.order_num+1)+"_event_odd_id"](null);e=!1,this.row.filter.rows().forEach(function(n){return n.odds().forEach(function(n){if(t.test(n.code))return e=!0})}),this.row.filter.event.has_regular(e)}if(this.row.odds().length===0){this.row.filter.rows.remove(this.row);if(this.row.filter.rows().length===0)return(window.live_menu.expanded_events().length===0||window.live_menu.expanded_events().indexOf(parseInt(this.row.filter.event.id))>-1)&&window.live_filters.removeFilter(this.row.filter.id),this.row.filter.event.filters.remove(this.row.filter),window.live_events.filters.remove(this.row.filter)}},this.update=function(e){var t,n,r,i,s=this;return i=parseFloat(this.odd_value()),r=parseFloat(e.odd_value),t=this.row.filter.event.has_regular(),n=this.row.filter.event.main_code_regexp(),i<r?(this.up(!0),this.down(!1),setTimeout(function(){return s.up(!1)},5e3),this.row.filter.id===1&&(t&&n.test(this.code)||!t&&/^ODD_S(.)$/.test(this.code))&&(this.row.filter.event["key"+(this.order_num+1)+"_odd_up"](!0),this.row.filter.event["key"+(this.order_num+1)+"_odd_down"](!1),setTimeout(function(){return s.row.filter.event["key"+(s.order_num+1)+"_odd_up"](!1)},5e3))):i>r&&(this.down(!0),this.up(!1),setTimeout(function(){return s.down(!1)},5e3),this.row.filter.id===1&&(t&&n.test(this.code)||!t&&/^ODD_S(.)$/.test(this.code))&&(this.row.filter.event["key"+(this.order_num+1)+"_odd_down"](!0),this.row.filter.event["key"+(this.order_num+1)+"_odd_up"](!1),setTimeout(function(){return s.row.filter.event["key"+(s.order_num+1)+"_odd_down"](!1)},5e3))),this.row.filter.id===1&&(t&&n.test(this.code)||!t&&/^ODD_S(.)$/.test(this.code))&&this.row.filter.event["key"+(this.order_num+1)+"_odd_value"](e.odd_value),this.odd_value(e.odd_value),this.additional_value(e.additional_value),this.additional_value_raw(e.additional_value_raw)},this.closeBar=function(e,t){return $("#progress-holder-"+this.id+" .progress-bar").length>0||(delete window.oneclick_alerts.event_odds[this.id],$("#progress-holder-"+this.id).html("")),t.stopPropagation(),!1}}return e}()}.call(this),function(){Live.Models.Row=function(){function e(e,t){var n=this;this.filter=t,this.id=parseInt(e.id),this.order_num=parseInt(e.order_num),this.col_width=12/e.odds.length,this.reorderOdds=function(){return this.odds.sort(function(e,t){return e.player_team!=null&&t.player_team!=null&&!isNaN(e.player_team)&&!isNaN(t.player_team)?e.player_team===t.player_team?e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1:e.player_team<t.player_team?-1:1:e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1})},this.odds=ko.observableArray([]),e.odds&&(e.odds.forEach(function(e){var t;return t=new Live.Models.Odd(e,n),n.odds().push(t)}),this.reorderOdds())}return e}()}.call(this),function(){Live.Models.Sport=function(){function e(e,t){var n=this;this.group=t,this.id=parseInt(e.id),this.high_stakes=ko.observable(e.high_stakes==="true"),this.name=e.name,this.title=e.title,this.hidden=ko.observable(!1),this.tournaments=ko.observableArray([]),this.checked=ko.observable(!1),this.menu_expanded=ko.observable(!1),this.first=ko.observable(e.first),this.menu_events=ko.observableArray([]),e.tournaments&&e.tournaments.forEach(function(e){return n.tournaments().push(new Live.Models.Tournament(e,n))}),this.max_amount=ko.computed(function(){var e,t;return e=[],this.tournaments().forEach(function(t){return e.push(t.max_amount())}),t=Math.max.apply(null,e),t},this),this.reorderTournaments=function(){var e=this;return this.tournaments.sort(function(t,n){var r,i,s,o,u,a,f,l,c,h;return o=[],t.events().forEach(function(e){return o.push(moment(e.date_start()).unix())}),s=Math.min.apply(null,o),c=[],n.events().forEach(function(e){return c.push((new moment(e.date_start())).unix())}),l=Math.min.apply(null,c),i=s,f=l,r=t.rating,a=n.rating,u=t.max_amount(),h=n.max_amount(),e.group.live?r===a?u===h?i===f?t.id<n.id?-1:t.id>n.id?1:0:i<f?-1:1:u<h?1:-1:r<a?-1:1:i===f?u===h?r===a?t.id<n.id?-1:t.id>n.id?1:0:r<a?-1:1:u<h?1:-1:i<f?-1:1})},this.events=ko.computed(function(){var e,t=this;return e=[],this.tournaments().forEach(function(t){return t.events().forEach(function(t){return e.push(t)})}),e},this),this.toggleHS=function(){var e,t,n=this;return e=!this.checked(),t=window.menu_view.expanded_hsports().indexOf(this.id),e===!0?t<0&&window.menu_view.expanded_hsports.push(this.id):t>-1&&window.menu_view.expanded_hsports.remove(this.id),this.menu_events().forEach(function(t){t.checked(e);if(e===!0){if(window.menu_view.expanded_events().indexOf(t.id)<0)return window.menu_view.expanded_events.push(t.id)}else if(window.menu_view.expanded_events().indexOf(t.id)>-1)return window.menu_view.expanded_events.remove(t.id)}),this
.checked(e),window.menu_view.expanded_sports().length>1&&window.sports_view.set_current(0),window.renderer.update()},this.toggle=function(){var e,t,n=this;return e=!this.checked(),t=window.menu_view.expanded_sports().indexOf(this.id),e===!0?t<0&&window.menu_view.expanded_sports.push(this.id):t>-1&&window.menu_view.expanded_sports.remove(this.id),this.menu_events().forEach(function(t){t.checked(e);if(e===!0){if(window.menu_view.expanded_events().indexOf(t.id)<0)return window.menu_view.expanded_events.push(t.id)}else if(window.menu_view.expanded_events().indexOf(t.id)>-1)return window.menu_view.expanded_events.remove(t.id)}),this.checked(e),window.menu_view.expanded_sports().length>1&&window.sports_view.set_current(0),window.renderer.update()},this.toggleExpand=function(){var e,t;return e=!this.menu_expanded(),t=window.menu_view.menu_expanded_sports().indexOf(this.id),e===!0?t===-1&&window.menu_view.menu_expanded_sports.push(this.id):t!==-1&&window.menu_view.menu_expanded_sports.remove(this.id),this.menu_expanded=ko.observable(e)},this.toggleExpandHS=function(){var e,t;return e=!this.menu_expanded(),t=window.menu_view.menu_expanded_hsports().indexOf(this.id),e===!0?t===-1&&window.menu_view.menu_expanded_hsports.push(this.id):t!==-1&&window.menu_view.menu_expanded_hsports.remove(this.id),this.menu_expanded=ko.observable(e)},this.upcoming_switch=function(){var e,t,n;return e=$("#liveBetting .active a"),e.prop("class")?t=e.prop("class").match(/live_sport_group_(\d+)/)[1]:t=0,n=this.id,window.upcoming_sport=n,!n||n===t?!1:($(".live_sport_group_"+t).parent().removeClass("active"),$("#liveBetting #live_sport_"+t).addClass("hidden"),$(".live_sport_group_"+n).parent().addClass("active"),$("#liveBetting #live_sport_"+n).removeClass("hidden"),!1)}}return e}()}.call(this),function(){Live.Models.Tournament=function(){function e(e,t){var n=this;this.sport=t,this.id=parseInt(e.id),this.country_name=e.country_name,this.name=e.name,this.comment=e.comment,this.live=e.live==="true",this.player_1_text=e.player_1_text,this.player_2_text=e.player_2_text,this.draw_text=e.draw_text,this.has_three_main_odds=e.has_three_main_odds==="true",this.hidden=ko.observable(!1),this.has_assigned=e.has_assigned,this.rating=parseInt(e.rating)||0,this.events=ko.observableArray([]),e.events&&e.events.forEach(function(e){var t;return t=new Live.Models.Event(e,n),n.events().push(t)}),this.reorderEvents=function(){var e=this;return this.events.sort(function(t,n){var r,i,s,o,u,a;return s=moment(t.date_start()).unix(),a=moment(n.date_start()).unix(),i=parseInt(t.short_id),u=parseInt(n.short_id),e.sport.group.live?(r=t.max_amount,o=n.max_amount,r===o?s===a?i<u?-1:i>u?1:0:s<a?-1:1:r<o?1:-1):s===a?i<u?-1:i>u?1:0:s<a?-1:1})},this.max_amount=ko.computed(function(){var e,t;return e=[],this.events().forEach(function(t){return e.push(t.max_amount)}),t=Math.max.apply(null,e),t},this)}return e}()}.call(this),function(){var e,t,n,r=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};String.prototype.scan=function(e){var t,n,r;if(!e.global)throw"ducks";r=this,t=void 0,n=[];while(t=e.exec(r))t.shift(),n.push(t);return n},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r,i;n=0,r=this.length,i=[];while(n<r)e.call(t,this[n],n,this),i.push(++n);return i}),e=function(){function e(e){var t=this;this.sports=ko.observableArray([]),this.high_stakes_count=0,window.menu_view||(window.menu_view={menu_expanded_sports:ko.observableArray([]),menu_expanded_hsports:ko.observableArray([])}),e.sports.forEach(function(e){return e.events.forEach(function(t){if(t.current)return window.menu_view.menu_expanded_sports.push(e.id),window.menu_view.menu_expanded_hsports.push(e.id)})}),this.fill_data=function(e){var n;return n=0,e.sports.forEach(function(e){var r;return r={id:e.id,name:e.name,title:e.title,path:e.path,first:e.first,active:ko.observable(e.active),events:ko.observableArray(),high_stakes:ko.observable(e.high_stakes==="true"),menu_expanded:ko.observable(!1),toggleExpand:function(){var e,t;return e=!this.menu_expanded(),t=window.menu_view.menu_expanded_sports().indexOf(this.id),e===!0?t===-1&&window.menu_view.menu_expanded_sports.push(this.id):t!==-1&&window.menu_view.menu_expanded_sports.remove(this.id),this.menu_expanded=ko.observable(e)},toggleExpandHS:function(){var e,t;return e=!this.menu_expanded(),t=window.menu_view.menu_expanded_hsports().indexOf(this.id),e===!0?t===-1&&window.menu_view.menu_expanded_hsports.push(this.id):t!==-1&&window.menu_view.menu_expanded_hsports.remove(this.id),this.menu_expanded=ko.observable(e)}},window.menu_view&&window.menu_view.menu_expanded_sports().indexOf(e.id)>-1&&!r.high_stakes()&&r.menu_expanded(!0),window.menu_view&&window.menu_view.menu_expanded_hsports().indexOf(e.id)>-1&&r.high_stakes()&&r.menu_expanded(!0),r.high_stakes()===!0&&(n=1),e.events.forEach(function(e){var t,n;return t={id:e.id,path:e.path,title:e.title,current:e.current,date_start:e.date_start,active:ko.observable(e.active),finished:ko.observable(!1),max_amount:e.max_amount,has_stream:ko.observable(e.has_stream==="true"),img_dge:ko.observable(e.stream_source==="img_dge"),img_perform:ko.observable((n=e.stream_source)==="perform"||n==="perform_web"||n==="perform_mobile"),high_stakes:ko.observable(e.high_stakes==="true"),redirectToEvent:function(){return window.location.href=this.path}},r.events.push(t)}),t.sports.push(r)}),t.high_stakes_count=n},this.fill_data(e),$("#live-menu-holder").show()}return e}(),t=function(){function e(e){var t=this;this.hide_scores=ko.observable(!1),this.sport_id=e.sport_id,this.sport_name=e.sport_name,this.period=ko.observable(""),this.period_i=ko.observable(0),this.period_tr=ko.observable(""),this.time=ko.observable(""),this.overtime=ko.observable(""),this.current=ko.observable(!1),this.present=ko.observable(e.present),this.ot=ko.observable(e.ot),this.ht=ko.observable(e.ht),this.bg=ko.observable(e.bg),this.pause=ko.observable(!1),this.team1={active:ko.observable(!1),name:ko.observable(""),points:ko.observable(0),sets:ko.observableArray([]),total:ko.observable(0)},this.team2={active:ko.observable(!1),name:ko.observable(""),points:ko.observable(0),sets:ko.observableArray([]),total:ko.observable(0)},this.messages=ko.observableArray([]),this.is_ended=ko.observable(e.is_ended),this.quarter_symbol=ko.observable(e.quarter_symbol),this.show_scores=ko.computed(function(){return parseInt(this.sport_id)!==45&&parseInt(this.sport_id)!==3&&parseInt(this.sport_id)!==3&&parseInt(this.sport_id)!==7&&parseInt(this.sport_id)!==42&&!this.hide_scores()?!0:!1},this),this.fill_data=function(e){var n,r;return t.quarter_symbol(e.quarter_symbol),t.hide_scores(e.hide_scores),t.period(e.period),t.period_i(e.period_i),t.period_tr(e.period_tr),t.time(e.time),t.ot(e.ot),t.pause(e.pause),t.ht(e.ht),t.bg(e.bg),t.is_ended(e.is_ended),e.team1?(t.team1.active(e.team1.active),t.team1.name(e.team1.name),t.team1.points(e.team1.points),t.team1.sets(e.team1.sets),t.team1.total(e.team1.total)):(t.team1.active(!1),t.team1.name(""),t.team1.points(0),t.team1.sets([]),t.team1.total(0)),e.team2?(t.team2.active(e.team2.active),t.team2.name(e.team2.name),t.team2.points(e.team2.points),t.team2.sets(e.team2.sets),t.team2.total(e.team2.total)):(t.team2.active(!1),t.team2.name(""),t.team2.points(0),t.team2.sets([]),t.team2.total(0)),e.messages.forEach(function(e){var n;return n={id:e.id,type:e.type,msg:e.msg,msg_text:e.text},t.messages.push(n),window.messages.push(n),n.id>window.last_message&&(window.last_message=n.id),t.messages.sort(function(e,t){return e.id===t.id?0:e.id<t.id?1:-1})}),r=parseInt(e.periods_count),n=parseInt(e.period_i),parseInt(e.sport_id)===4&&n>3||r>0&&n>r||parseInt(e.sport_id)===1&&n>4?t.overtime(!0):t.overtime(!1),t.current(e.current)},this.fill_data(e),e.team1&&e.team2&&$("#live-tv-widget").show()}return e}(),n=function(){function e(e){var t,n=this;this.filters=ko.observableArray([]),this.is_ended=ko.observable(e.is_ended),t=function(e){var t;return e=parseFloat(e),t=e>1&&e<1.01?3:2,n.odd_format==="uk"?Ratio.parse(parseFloat(e-1).toFixed(t)).simplify().toString():n.odd_format==="us"?e<=1?0:e<=2?-Math.round(100/(e-1)):"+"+Math.round(100*(e-1)):e.toFixed(t)},this.fill_data=function(e){return n.odd_format=$.cookie("event_odd_format"),n.odd_format==null&&(n.odd_foramt="eu"),n.is_ended(e.is_ended),n.id=e.id,n.date_start=moment(e.date_start),n.corners=ko.observableArray(ko.utils.arrayMap(e.corners,function(e){return{team:e.team,value:e.value}})),e.filters.forEach(function(e){var r;return r={id:e.id,columns_max:e.columns_max,disabled_minutes:e.disabled_minutes,event_id:e.event_id,filter_comment:ko.observable(e.filter_comment),filter_group_comment:e.filter_group_comment,filter_name:e.filter_name,filter_name_short:e.filter_name_short,order_nr:e.order_nr,outright:ko.observable(e.outright),grouped:ko.observable(e.grouped_odds),grouped_rows:ko.observableArray([]),player_tag_odds:ko.observable(e.player_tag_odds),groups:e.groups?ko.observable(e.groups):void 0,indexes:e.indexes?ko.observableArray(e.indexes):void 0,width:e.width,player_tag:e.player_tag,rows:ko.observableArray([]),state:ko.observable(e.state),expanded:ko.observable(e.state),toggle:function(){var e;return window.filter_state[this.id]!=null?e=window.filter_state[this.id]:e=!0,window.filter_state[this.id]=!e,this.expanded(!this.expanded()),!1}},e.grouped_rows.forEach(function(e){var n;return n={odds:ko.observableArray([]),width:e.width},e.odds.forEach(function(e){var r,i;return e.frozen===!0?r="":r="price",e?i={id:e.id,additional_value:ko.observable(e.additional_value),additional_value_raw:ko.observable(e.additional_value_raw),odd_name:ko.observable(e.odd_name),odd_name2:ko.observable(e.odd_name2),odd_value:ko.observable(e.odd_value),display_odd_value:ko.observable(t(e.odd_value)),order_nr:ko.observable(parseInt(e.order_nr)),row_id:e.row_id,up:ko.observable(!1),down:ko.observable(!1),group:ko.observable(e.group),frozen:ko.observable(e.frozen),span_class:r,oneclick_bar:ko.observable(e.oneclick_bar),closeBar:function(e,t){return $("#progress-holder-"+e.id+" .progress-bar-orange").length>0||(delete window.oneclick_alerts.event_odds[e.id],$("#progress-holder-"+e.id).html("")),t.stopPropagation(),!1}}:i={},window.odds[i.id]&&(window.odds[i.id]>parseFloat(i.odd_value())?i.down(!0):window.odds[i.id]<parseFloat(i.odd_value())&&i.up(!0)),window.odds[i.id]=parseFloat(i.odd_value()),n.odds.push(i)}),r.grouped_rows.push(n)}),e.rows.forEach(function(n){var i;return i={id:n.id,double_row:ko.observable(n.double_row),filter_id:n.filter_id,order_nr:n.order_nr,single_row:ko.observable(n.single_row),odds:ko.observableArray([]),width:12},n.odds.forEach(function(n){var r,s,o;return n.frozen===!0?s="":s="price",o={id:n.id,additional_value:ko.observable(n.additional_value),additional_value_raw:ko.observable(n.additional_value_raw),odd_name:ko.observable(n.odd_name),odd_name2:ko.observable(n.odd_name2),odd_value:ko.observable(n.odd_value),display_odd_value:ko.observable(t(n.odd_value)),order_nr:ko.observable(parseInt(n.order_nr)),row_id:n.row_id,up:ko.observable(!1),down:ko.observable(!1),group:ko.observable(n.group),frozen:ko.observable(n.frozen),span_class:s,oneclick_bar:ko.observable(n.oneclick_bar),closeBar:function(e,t){return $("#progress-holder-"+e.id+" .progress-bar").length>0||(delete window.oneclick_alerts.event_odds[e.id],$("#progress-holder-"+e.id).html("")),t.stopPropagation(),!1}},e.player_tag_odds&&(r=n.additional_value.replace(/^\s+|\s+$/g,""),o.additional_value_text=ko.observable("-"+r+"+"),o.ovr_odd_value=ko.observable(n.ovr_odd.odd_value),o.ovr_display_odd_value=ko.observable(t(n.ovr_odd.odd_value)),o.ovr_odd_id=n.ovr_odd.id,o.ovr_odd_additional_value_raw=ko.observable(n.ovr_odd.additional_value_raw),o.ovr_down=ko.observable(!1),o.ovr_up=ko.observable(!1),window.odds[n.ovr_odd.id]&&(window.odds[n.ovr_odd.id]>parseFloat(o.ovr_odd_value())?o.ovr_down(!0):window.odds[n.ovr_odd.id]<parseFloat(o.ovr_odd_value())&&o.ovr_up(!0)),window.odds[n.ovr_odd.id]=parseFloat(o.ovr_odd_value())),window.odds[o.id]&&(window.odds[o.id]>parseFloat(o.odd_value())?o.down(!0):window.odds[o.id]<parseFloat(o.odd_value())&&o.up(!0)),window.odds[o.id]=parseFloat(o.odd_value()),i.odds.push(o)}),i.width=12/i.odds().length,r.rows.push(i)}),n.filters.push(r)})},this.fill_data(e),$("#event-filters").show(),this.setCornersCount=function(e){var t,n;if(e.length>0){n=JSON.parse(e),this.corners([]);if(n&&n.crn)return t={team:1,value:parseInt(n.crn.T1)},this.corners.push(t),t={team:2,value:parseInt(n.crn.T2)},this.corners.push(t)}}}return e}(),Live.EventRenderer=function(){function i(i){this.json_url=i.json_url+"?lang="+gon.locale+"&id="+gon.event_id+"&franchise_id="+gon.franchise_id,this.stopTimer=function(){return clearTimeout(window.timer_timeout)},this.startTimer=function(e,t){var n=this;return t==null&&(t=1),window.timer_timeout=setTimeout(function(){var r;return t===2?r=e+1e3:r=e-1e3,window.evs.time(n.millisToMinutesAndSeconds(r)),n.startTimer(r,t)},1e3)},this.millisToMinutesAndSeconds=function(e){var t,n,r;return e<0?"00:00":(r=e/1e3,t=Math.floor(r/60),n=Math.floor(r-t*60),t<10&&(t="0"+t),n<10&&(n="0"+n),""+t+":"+n)},this.renderOneclickBar=function(e){var t,n;return window.high_stake_event!=null?t="purple":t="orange",e.status==="progress"?n='<div class="progress-bar progress-bar-'+t+' progress-bar-striped active" style="width:100%;"><span>'+e.message+"</span></div>":e.status==="success"?n='<div class="alert alert-success alert-dismissible"><span>'+e.message+'</span><button type="button" class="close oneclick-alert-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>':n='<div class="alert alert-danger alert-dismissible"><span>'+e.message+'</span><button type="button" class="close oneclick-alert-close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>',n},this.generate_new_data=function(e){var t,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x=this;a={stats:{},menu:{sports:[]},live:{}},e.all_events.forEach(function(t){var n,r,i,s;return r=null,a.menu.sports.forEach(function(e){gon.franchise_id===3&&(e.high_stakes=!1,t.high_stakes=!1);if(e.id===t.sport_id&&t.high_stakes===e.high_stakes)return r=e}),r||(t.high_stakes==="true"?s="/live_events?hsport_id="+t.sport_id:s="/live_events?sport_id="+t.sport_id,r={id:t.sport_id,name:t.sport_name,title:t.sport_title,path:s,first:!1,active:!0,high_stakes:t.high_stakes,events:[]},a.menu.sports.push(r)),t.id===e.event.id?i=!0:i=!1,n={id:t.id,title:t.title,path:"/event/"+t.id,current:i,date_start:t.date_start,active:!0,max_amount:parseInt(t.max_amount),has_stream:t.has_stream,stream_source:t.stream_source,high_stakes:t.high_stakes},t.high_stakes==="true"&&t.id===e.event.id&&(window.high_stake_event=!0),r.events.push(n)}),a.menu.sports.sort(function(e,t){var n,r,i,s,o,u,a,f,l=this;return i=[],e.events.forEach(function(e){return i.push(e.max_amount)}),a=[],t.events.forEach(function(e){return a.push(e.max_amount)}),s=e.high_stakes==="true",f=t.high_stakes==="true",n=Math.max.apply(null,i),o=Math.max.apply(null,a),r=e.id,u=t.id,s===f?n===o?r===u?0:r<u?-1:1:n<o?1:-1:s>f?-1:1}),a.menu.sports.forEach(function(e){return e.events.sort(function(e,t){var n,r,i,s,o,u;return n=e.max_amount,s=t.max_amount,i=moment(e.date_start).unix(),u=moment(t.date_start).unix(),r=e.id,o=t.id,n===s?i===u?r===o?0:r<o?-1:1:i<u?-1:1:n<s?1:-1})}),a.live={id:e.event.id,is_ended:e.is_ended,date_start:e.event.date_start,filters:[]},typeof e.event.odds!="undefined"&&e.event.odds.forEach(function(t){var n,r,i,s,o,u;n=null,a.live.filters.forEach(function(e){if(e.id===t.filter_id)return n=e}),n||(t.filter_id==="49"&&e.event.sport_id==="2"?s=gon.even_odd_comment:s=null,e.filters[t.filter_id]&&e.filters[t.filter_id]&&(n={id:t.filter_id,event_id:e.event.id,disabled_minutes:null,filter_comment:s,filter_group_comment:null,filter_name:e.filters[t.filter_id].name,filter_name_short:null,player_tag:null,outright:!1,order_nr:e.filters[t.filter_id].order_num,grouped_odds:!1,rows:[]},a.live.filters.push(n))),n&&(i=null,o=(u=n.id)==="103"||u==="104"||u==="146"||u==="147"||u==="148"||u==="149"||u==="150"||u==="151"||u==="152"||u==="153"||u==="154",n.rows.forEach(function(e){if(e.id===t.row_id||o)return i=e}),i||(i={id:t.row_id,filter_id:t.filter_id,order_nr:t.row_id,odds:[],double_row:!1,single_row:!1},n.rows.push(i)));if(i){r=null,i.odds.forEach(function(e){if(e.id===t.id)return r=t});if(!r)return r={id:t.id,row_id:t.row_id,odd_name:t.team_name,odd_name2:t.team_name2,odd_value:t.odd_value,additional_value:t.team_info,additional_value_raw:t.additional_value_raw,order_nr:t.order_num,code:t.code,player_team:t.player_team,frozen:t.frozen==="true"},window.oneclick_alerts.event_odds[r.id]&&(r.oneclick_bar=x.renderOneclickBar(window.oneclick_alerts.event_odds[r.id])),i.odds.push(r)}}),a.live.filters.forEach(function(e){var t,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=this;v=!0,s=!1,p=[[],[],[]],m=!1,i=!0,f=[],d={},n=(y=e.id)==="103"||y==="104"||y==="146"||y==="147"||y==="148"||y==="149"||y==="150"||y==="151"||y==="152"||y==="153"||y==="154",e.rows.forEach(function(t){var r;return r=window.player_odds[t.odds[0].code],t.odds.length===1?t.single_row=!0:t.odds.length===2&&(t.double_row=!0),t.odds.length>1&&(v=!1),r=window.player_odds[t.odds[0].code],r&&(t.odds.forEach(function(e){var n;if(e.code.indexOf("_UND")>0)return n=t.odds.filter(function(t){return t.code.indexOf("_OVR")>0&&t.odd_name2===e.odd_name2}),e.ovr_odd=n[0]}),t.odds=t.odds.filter(function(e){return e.ovr_odd})),n&&t.odds.sort(function(e,t){var n,r;return n=parseFloat(e.odd_value),r=parseFloat(t.odd_value),n<r?-1:n>r?1:0}),t.odds.forEach(function(o,u){var a,l,c,h,g,y,b;a=o.code,l=0,e.id==="11"&&/^ODD_SCORES_(\d+_\d+|OTHER)$/.test(a)?(s=!0,c=a.scan(/^ODD_SCORES_((\d+)_(\d+)|OTHER)$/g)[0],c[1]&&c[2]?parseInt(c[1])>parseInt(c[2])?l=1:parseInt(c[1])<parseInt(c[2])?l=3:l=2:l=2):r?(m=!0,s=!0,o.player_team&&(l=parseInt(o.player_team)+1)):(h=e.id)!=="113"&&h!=="114"||!/^ODD_HT._SCORES_(\d+_\d+|OTHER)$/.test(a)?(g=e.id)==="100"||g==="101"||g==="102"?(s=!0,/^ODD_PER[123]_SCORES_((\d+)_(\d+)|OTHER)$/.test(a)?(c=a.scan(/^ODD_PER[123]_SCORES_((\d+)_(\d+)|OTHER)$/g)[0],c[1]&&c[2]?parseInt(c[1])>parseInt(c[2])?l=1:parseInt(c[1])<parseInt(c[2])?l=3:l=2:l=2):l=parseInt(rows[0].group_order_num)+1):(y=e.id)!=="89"&&y!=="90"&&y!=="91"&&y!=="92"&&y!=="93"||!/^ODD_TENNIS_SET\d_SCORE_((\d+)_(\d+)|OTHER)/.test(a)?(b=e.id)!=="32"&&b!=="33"&&b!=="34"&&b!=="35"&&b!=="36"||!/^ODD_SET(\d)_(\d)_TTL_(UND|OVR)$/.test(a)?n&&(s=!0,v=!0,l=u%2+1,o.odd_name=o.odd_name.split(" - ")[0],i=!1):d[t.id]=t.order_nr:(s=!0,c=a.scan(/^ODD_TENNIS_SET\d_SCORE_(?:(\d+)_(\d+)|OTHER)_?(\d)?$/g)[0],c[0]&&c[1]?parseInt(c[0])>parseInt(c[1])?l=1:parseInt(c[0])<parseInt(c[1])&&(l=2):c[2]?parseInt(c[2])===1?l=1:l=2:l=2):(s=!0,c=a.scan(/^ODD_HT._SCORES_((\d+)_(\d+)|OTHER)$/g)[0],c[1]&&c[2]?parseInt(c[1])>parseInt(c[2])?l=1:parseInt(c[1])<parseInt(c[2])?l=3:l=2:l=2),o.group=l,l!==0&&p[l-1].push(o);if(f.indexOf(l)<0)return f.push(l)})}),a=_.keys(d),a.length>0&&(h=_.min(_.values(d)),e.rows.forEach(function(e){var t;if(t=e.id,r.call(a,t)>=0)return e.order_nr=h})),e.outright=v,e.grouped_odds=s,e.player_tag_odds=m,e.indexes=f,e.width=12/f.length,window.filter_state[parseInt(e.id)]!=null?g=window.filter_state[parseInt(e.id)]:g=!0,e.state=g,o=[],c=Math.max(p[0].length,p[1].length,p[2].length);if(c!==0){u=0;if(i)while(u<3)p[u].sort(function(e,t){return e.code>t.code}),u+=1;t={};while(c>0)l=f.sort(),f.length===3?o.push({odds:[p[l[0]-1].shift()||t,p[l[1]-1].shift()||t,p[l[2]-1].shift()||t],width:e.width}):f.length===2?o.push({odds:[p[l[0]-1].shift()||t,p[l[1]-1].shift()||t],width:e.width}):f.length===1&&o.push({odds:[p[l[0]-1].shift()||t],width:e.width}),c-=1}return e.grouped_rows=o}),a.live.filters.sort(function(e,t){return e.order_nr===t.order_nr?0:parseInt(e.order_nr)<parseInt(t.order_nr)?-1:1}),a.live.filters.forEach(function(t){var n;t.rows.forEach(function(e){return e.odds.sort(function(e,t){return e.order_nr===t.order_nr?0:parseInt(e.order_nr)<parseInt(t.order_nr)?-1:1})}),t.rows.sort(function(e,t){var n,r,i,s;return n=parseInt(e.order_nr),i=parseInt(t.order_nr),r=parseFloat(e.odds[0].odd_value),s=parseFloat(t.odds[0].odd_value),n===i?r>s?-1:r<s?1:0:n<i?-1:1}),n=parseInt(e.event.sport_id);if([1,2,6,11].indexOf(n)>-1&&(parseInt(t.id)===4||parseInt(t.id)===6))return t.rows.sort(function(e,t){var n,r,i;return r=e.odds[0].odd_value,i=t.odds[0].odd_value,n=e.odds[0].code,r===i?0:parseFloat(r)<parseFloat(i)?-1:1})}),a.stats={sport_id:e.event.sport_id,sport_name:e.event.sport_name,periods_count:0,team1:{name:e.event.team1_name,points:0,sets:[]},team2:{name:e.event.team2_name,points:0,sets:[]},present:!1,messages:[],is_ended:e.is_ended},e.messages&&e.messages.forEach(function(e){var t;return t={id:parseInt(e.id),type:parseInt(e.type),msg:e.msg,text:e.text},a.stats.messages.push(t)});if(typeof e.event.stats!="undefined"&&e.event.stats.length>0&&e.event.stats!=="null"){a.stats.present=!0,w=JSON.parse(e.event.stats);if(e.event.sport_id==="1"&&w.calcTime){w.active&&(w.active===1&&(a.stats.team1.active=!0),w.active===2&&(a.stats.team2.active=!0)),a.stats.bg=!0,u=parseInt(w.calcTime.ms);if(w.calcTime.isRunnning===!1||w.calcTime.isRunnning==="False")a.stats.time=this.millisToMinutesAndSeconds(u),this.stopTimer();else if(w.calcTime.isRunnning===!0||w.calcTime.isRunnning==="True")b=moment(w.calcTime.send+" +0000"),y=moment(w.calcTime.tm+" +0000"),g=b-y,g>6e5?E=u:E=u-g,o=Number(e.time),t=o-b,a.stats.time=this.millisToMinutesAndSeconds(E-t),this.startTimer(E-t)}else if(e.event.sport_id==="2"&&w.calcTime){a.stats.bg=!0,u=parseInt(w.calcTime.ms);if(w.calcTime.isRunnning===!1||w.calcTime.isRunnning==="False")a.stats.time=this.millisToMinutesAndSeconds(u),this.stopTimer();else if(w.calcTime.isRunnning===!0||w.calcTime.isRunnning==="True")o=Number(e.time),b=moment(w.calcTime.tm+" +0000"),E=o-b+u,a.stats.time=this.millisToMinutesAndSeconds(E),this.startTimer(E,2)}else w.time&&(a.stats.time=w.time),a.stats.bg=!1;w.period&&(parseFloat(w.period)%1!==0&&(w.period=parseInt(w.period),a.stats.pause=!0),parseInt(e.event.sport_id)===2?(d=parseInt(w.period),d>=3&&d<=4?(a.stats.period_i=d-2,a.stats.quarter_symbol="scorebox_football_overtime"):d<=2?(a.stats.period_i=d,a.stats.quarter_symbol="quarter_translation"):d===5&&(a.stats.quarter_symbol="penalties")):a.stats.period_i=w.period);if(e.event.sport_id==="3"){w.current&&(a.stats.team1.points=w.current.T1,a.stats.team2.points=w.current.T2),w.total?(parseInt(w.total.T1)<0?a.stats.team1.total=0:a.stats.team1.total=w.total.T1,parseInt(w.total.T2)<0?a.stats.team2.total=0:a.stats.team2.total=w.total.T2):(a.stats.team1.total=0,a.stats.team2.total=0);if(w.p){v=[],m=[];for(s in w.p)v.push({points:w.p[s].T1}),m.push({points:w.p[s].T2}),w.total||(parseInt(w.p[s].T1)===6&&parseInt(w.p[s].T2)<5||parseInt(w.p[s].T1)===7?a.stats.team1.total++:(parseInt(w.p[s].T2)===6&&parseInt(w.p[s].T1)<5||parseInt(w.p[s].T2)===7)&&a.stats.team2.total++);a.stats.team1.sets=v,a.stats.team2.sets=m}}else if(e.event.sport_id==="45"){if(w.p){v=[],m=[],i=0;for(s in w.p)v.push({points:w.p[s].T1,last:parseInt(w.period)===i}),m.push({points:w.p[s].T2,last:parseInt(w.period)===i});a.stats.team1.sets=v,a.stats.team2.sets=m,w.total&&(parseInt(w.total.T1)<0?a.stats.team1.points=0:a.stats.team1.points=w.total.T1,parseInt(w.total.T2)<0?a.stats.team2.points=0:a.stats.team2.points=w.total.T2)}}else if(e.event.sport_id==="7"||e.event.sport_id==="42"){if(w.p){v=[],m=[],S={T1:0,T2:0},i=0;for(s in w.p){i++;if(parseInt(s)<Object.keys(w.p).length){h=parseInt(w.p[s].T1),p=parseInt(w.p[s].T2),t=h-p;if(parseInt(s)!==5&&(h>24||p>24)||h>14||p>14)t>1?S.T1++:t<-1&&S.T2++}v.push({points:w.p[s].T1,last:parseInt(w.period)===i}),m.push({points:w.p[s].T2,last:parseInt(w.period)===i})}a.stats.team1.sets=v,a.stats.team2.sets=m,parseInt(S.T1)<0?a.stats.team1.points=0:a.stats.team1.points=S.T1,parseInt(S.T2)<0?a.stats.team2.points=0:a.stats.team2.points=S.T2}}else w.total&&(parseInt(w.total.T1)<0?a.stats.team1.points=0:a.stats.team1.points=w.total.T1,parseInt(w.total.T2)<0?a.stats.team2.points=0:a.stats.team2.points=w.total.T2);e.event.sport_id==="59"&&w.total==null?a.stats.hide_scores=!0:a.stats.hide_scores=!1;if(e.event.sport_id==="1"&&w.p){v=[],m=[],f={present:!1,1:0,2:0},n={present:!1,1:0,2:0},c=1,e.event.tournament_id==="30"?l=3:l=5;for(s in w.p)c<l?(typeof w.p[s].T1!="undefined"&&(v.push({points:w.p[s].T1}),s<3&&l===5&&(n[1]+=parseInt(w.p[s].T1))),typeof w.p[s].T2!="undefined"&&(m.push({points:w.p[s].T2}),s<3&&l===5&&(n[2]+=parseInt(w.p[s].T2)))):(f.present=!0,typeof w.p[s].T1!="undefined"&&(f[1]+=parseInt(w.p[s].T1)),typeof w.p[s].T2!="undefined"&&(f[2]+=parseInt(w.p[s].T2))),s>1&&l===5&&(n.present=!0),c++;a.stats.team1.sets=v,a.stats.team2.sets=m,a.stats.ot=f,a.stats.ht=n}e.event.active_team==="1"?a.stats.team1.active=!0:e.event.active_team==="2"&&(a.stats.team2.active=!0),e.event.sport_id==="17"&&(typeof w.period!="undefined"&&w.period!==""?a.stats.period_i=parseInt(w.period):a.stats.period_i=parseInt(w.total.T1)+parseInt(w.total.T2)+1)}else e.event.sport_id==="59"&&(a.stats.hide_scores=!0);return a},this.update=function(){var e,t=this;return e=this.json_url,window.last_message>0&&(e+="&msg_id="+window.last_message),$.get(e,function(e){var n;e.constructor===String&&(e=JSON.parse(e)),clearTimeout(window.timer_timeout),e.is_ended?(e=window.last_data,e.is_ended=!0,n=t.generate_new_data(e),n.live.filters=[]):(window.last_data=e,n=t.generate_new_data(e));if(n)return window.evm.sports().forEach(function(e){return e.events.removeAll()}),window.evm.sports.removeAll(),window.evo.filters().forEach(function(e){return e.rows().forEach(function(e){return e.odds.removeAll()}),e.rows.removeAll()}),window.evo.filters.removeAll(),window.evo.fill_data(n.live),window.evm.fill_data(n.menu),window.evs.fill_data(n.stats),window.evo.setCornersCount(e.event.stats),FlipClock&&(n.stats.team1.points>=100&&window.clockHome.minimumDigits<=2&&(window.clockHome=$(".homeFlip").FlipClock(n.stats.team1.points,{clockFace:"Counter",minimumDigits:3})),n.stats.team2.points>=100&&window.clockAway.minimumDigits<=2&&(window.clockAway=$(".awayFlip").FlipClock(n.stats.team2.points,{clockFace:"Counter",minimumDigits:3})),window.clockHome.setValue(n.stats.team1.points),window.clockAway.setValue(n.stats.team2.points)),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),typeof scrolltotop_position_check!="undefined"&&scrolltotop_position_check!==null&&scrolltotop_position_check&&scrolltotop_position_check(),setTimeout(function(){return window.renderer.update()},4e3),t.run_responsive_js()})},this.render=function(){var r=this;return window.event_id=gon.event_id,window.odds={},window.messages=[],window.last_message=0,window.filter_state=[],window.left_tab="tab-1",$("#tab-2").length>0?window.right_tab="tab-2":$("#tab-3").length>0&&(window.right_tab="tab-3"),$.get(this.json_url,function(i){var s,o,u,a,f;i.constructor===String&&(i=JSON.parse(i)),a=r.generate_new_data(i);if(a){s=new e(a.menu),window.evm=s,ko.applyBindings(s,document.getElementById("live-menu-holder")),f=new t(a.stats),window.evs=f,ko.applyBindings(f,document.getElementById("live-tv-widget")),document.getElementById("panel_tv")&&ko.applyBindings(f,document.getElementById("panel_tv")),u=new n(a.live),window.evo=u,u.date_start<new Date&&ko.applyBindings(u,document.getElementById("event-filters")),window.evo.setCornersCount(i.event.stats),$(".liveFeed ul").perfectScrollbar("update"),$("#panel_tv").show(),setTimeout(function(){return window.renderer.update()},4e3),r.run_responsive_js(),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),typeof scrolltotop_position_check!="undefined"&&scrolltotop_position_check!==null&&scrolltotop_position_check&&scrolltotop_position_check();if(FlipClock)return o=2,$.inArray(a.stats.sport_id,["2","4","6","17"])>=0&&(o=1),window.clockHome=$(".homeFlip").FlipClock(a.stats.team1.points,{clockFace:"Counter",minimumDigits:o}),window.clockAway=$(".awayFlip").FlipClock(a.stats.team2.points,{clockFace:"Counter",minimumDigits:o})}})},this.run_responsive_js=function(){var e;return $(".nav-tabs.nav-live-tv li.livetab").click(function(){return $(document).width()<975?window.left_tab=this.id:(window.right_tab=this.id,window.left_tab="tab-1")}),e=$("#live-tv-widget").outerWidth(!0),$(".panel-score").css({width:e}),$(window).resize(function(){return e=$("#live-tv-widget").outerWidth(!0),$(".panel-score").css({width:e})}),$(".panel-tv").on("click",".nav-live-tv .icon-fullscreen",function(t){return $("#main-panel").addClass("bigger-right"),$(this).parent().find(".icon-fullscreen").removeClass("icon-fullscreen").addClass("icon-windowed"),$(".panel-score").css({width:""}),e=$("#live-tv-widget").outerWidth(!0),$(".panel-score").css({width:e})}),$(".panel-tv").on("click",".nav-live-tv .icon-windowed",function(t){return $("#main-panel").removeClass("bigger-right"),$(this).parent().find(".icon-windowed").removeClass("icon-windowed").addClass("icon-fullscreen"),$(".panel-score").css({width:""}),e=$("#live-tv-widget").outerWidth(!0),$(".panel-score").css({width:e})}),$(document).width()<975?($("#main-right").find(".panel-tv").appendTo("#live-tv-widget"),$("#"+window.left_tab+" a").tab("show")):($("#live-tv-widget").find(".panel-tv").insertBefore("#main-panel #main-right .right-container .panel-one-click"),$("#"+window.right_tab+" a").tab("show")),$(window).resize(function(){return $(document).width()<975?($("#main-right").find(".panel-tv").appendTo("#live-tv-widget"),$("#"+window.left_tab+" a").tab("show")):($("#live-tv-widget").find(".panel-tv").insertBefore("#main-panel #main-right .right-container #betslip"),$("#"+window.right_tab+" a").tab("show"))})}}return i}()}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Live.UpcomingRenderer=function(){function t(t){this.json_url=t.json_url+"?lang="+gon.locale+"&franchise_id="+gon.franchise_id,this.generate_events_data=function(t){var n,r,i,s=this;return window.live_time=t.time,r={sports:[]},n=[],t.events.forEach(function(e){var t,i,s,o,u,a,f,l;i=null,r.sports.forEach(function(t){if(t.id===e.sport_id)return i=t}),i||(i={id:e.sport_id,name:e.sport_name,title:e.sport_title,first:!1,tournaments:[],max_amount:0,has_live:0},r.sports.push(i),n.push(parseInt(e.sport_id))),s=null,i.tournaments.forEach(function(t){if(t.id===e.tournament_id)return s=t}),s||(s={id:e.tournament_id,country_name:e.country_name,name:e.tournament_name,comment:e.tournament_comment,live:e.tournament_live,player_1_text:e.player_1_text,player_2_text:e.player_2_text,draw_text:e.draw_text,has_three_main_odds:e.has_three_main_odds,events:[]},i.tournaments.push(s),e.tournament_live==="true"&&(i.has_live=1)),typeof e.time_text=="undefined"?l="":l=e.time_text,o="",e.tournament_live!=="true"&&e.linked_id?(o="assigned_",u=e.linked_id,a=e.linked_short_id):(u=0,a=0),t={id:e.id,date_start:e.date_start,is_soon:e.is_soon,time_text:l,short_id:e.short_id,team1_name:e.team1_name,team2_name:e.team2_name,comment_text:e.comments,has_stream:e.has_stream,stream_url:e.stream_url,stats_url:e.stats_url,stats_present:e.stats_present,stats_time:e.stats_time,stats_text:e.stats_text,stats:e.stats,active_team:e.active_team,count:e.count,main_code:e.main_code,high_stakes:e.high_stakes,key1_odd_value:e[""+o+"key1_odd_value"],key1_event_odd_id:e[""+o+"key1_event_odd_id"],key1_odd_frozen:e[""+o+"key1_odd_frozen"],key2_odd_value:e[""+o+"key2_odd_value"],key2_event_odd_id:e[""+o+"key2_event_odd_id"],key2_odd_frozen:e[""+o+"key2_odd_frozen"],key3_odd_value:e[""+o+"key3_odd_value"],key3_event_odd_id:e[""+o+"key3_event_odd_id"],key3_odd_frozen:e[""+o+"key3_odd_frozen"],linked_id:u,linked_short_id:a,stream_source:e.stream_source,max_amount:e.max_amount},s.events.push(t),f=parseInt(e.max_amount);if(f>i.max_amount)return i.max_amount=f}),r.sports.sort(function(e,t){var n,r;return e.has_live===t.has_live?e.max_amount===t.max_amount?(n=parseInt(e.id),r=parseInt(t.id),n<r?-1:n>r?1:0):e.max_amount<t.max_amount?1:-1:e.has_live<t.has_live?1:-1}),typeof window.upcoming_sport!="undefined"&&(i=parseInt(window.upcoming_sport),e.call(n,i)<0)&&delete window.upcoming_sport,r},this.update=function(){var e,t=this;return e=$("#liveBetting").css("height"),$("#liveBetting").css("height",e),clearTimeout(window.events_timeout),$.get(this.json_url,function(e){var n;return e.constructor===String&&(e=JSON.parse(e)),n=t.generate_events_data(e),window.upcoming_view.sports().forEach(function(e){return e.tournaments().forEach(function(e){return e.events.removeAll()}),e.tournaments.removeAll()}),window.upcoming_view.sports.removeAll(),window.
upcoming_view.fill_data(n),$("#liveBetting").css("height","auto"),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),window.events_timeout=setTimeout(function(){return window.renderer.update()},4e3)})},this.render=function(){var e=this;return window.main_odds={},$.get(this.json_url,function(t){var n,r;return t.constructor===String&&(t=JSON.parse(t)),n=e.generate_events_data(t),window.upcoming_view=new Live.Views.Upcoming(n),r=document.getElementById("liveBetting"),ko.applyBindings(window.upcoming_view,r),markSelectedBets&&markSelectedBets(),activate_to_price&&activate_to_price(),window.events_timeout=setTimeout(function(){return window.renderer.update()},4e3),$("#liveBetting").show()})}}return t}()}.call(this),function(){Live.Views.Events=function(){function e(e,t){var n=this;this.filters_view=t,this.filters=ko.observableArray([]),this.odd_format=$.cookie("event_odd_format"),this.odd_format==null&&(this.odd_foramt="eu"),this.groups=ko.observableArray([]),this.oneclick_enabled=ko.observable($("#switch").hasClass("off")),this.reorderGroups=function(){return this.groups.sort(function(e,t){var n,r;return e.date==="0"?n=moment(0):n=moment(e.date),t.date==="0"?r=moment(0):r=moment(t.date),n===r?0:n<r?-1:1})},this.fill_data=function(e){n.oneclick_enabled($("#switch").hasClass("off"));if(e.groups)return e.groups.forEach(function(e){return n.groups().push(new Live.Models.Group(e,n))}),n.reorderGroups()},this.fill_data(e),$("#live_events_view").show()}return e}()}.call(this),function(){Live.Views.Filters=function(){function e(e){var t=this;this.filters=ko.observableArray([]),this.expanded_filters=ko.observableArray([]),this.expanded=ko.observable(!1),this.preopen=!1,this.prexpanded=ko.observable(!1),this.bet_type_id=ko.observable(this.expanded_filters()[0]),this.reorderFilters=function(){return this.filters.sort(function(e,t){return e.order_num===t.order_num?0:e.order_num<t.order_num?-1:1})},this.groupFilters=function(){var e;return e=0,this.filters().each_slice(Math.ceil(this.filters().length/3),function(t){return e++,t.forEach(function(t){return t.col(e)})})},this.clear_expired_filter=function(){var e,t=this;return e=[],this.filters().forEach(function(t){return e.push(t.id)}),this.expanded_filters().forEach(function(n){var r;r=!1;if(e.indexOf(n)<0){t.expanded_filters.remove(n),r=!0;if(r)return window.renderer.update()}})},this.fill_data=function(e){var n,r;for(r in e)n=new Live.Models.FiltersFilter({id:r,title:e[r].title,count:e[r].count}),window.filters_view&&window.filters_view.expanded_filters().indexOf(parseInt(r))>-1&&n.expanded(!0),t.filters.push(n);return t.clear_expired_filter(),t.reorderFilters(),t.groupFilters()},this.fill_data(e),$("#live_filters_view").show(),this.toggle=function(){return t.preopen=!t.preopen,t.prexpanded(!t.prexpanded())},this.betTypeIdChanged=function(e,n){return n.originalEvent?(t.expanded_filters([e.bet_type_id()]),window.renderer.update()):e.bet_type_id(t.expanded_filters()[0])}}return e}()}.call(this),function(){Live.Views.Menu=function(){function e(e){var t=this;this.sports=ko.observableArray([]),this.expanded_events=ko.observableArray([]),this.expanded_sports=ko.observableArray([]),this.expanded_hsports=ko.observableArray([]),this.menu_expanded_sports=ko.observableArray([]),this.menu_expanded_hsports=ko.observableArray([]),this.high_stakes_count=ko.computed(function(){var e,t=this;return e=0,this.sports().forEach(function(t){if(t.high_stakes()===!0)return e=1}),e},this),this.fill_data=function(e){return e.forEach(function(e){var n,r;return gon.franchise_id===3&&(e.high_stakes=!1),r=null,t.sports().forEach(function(t){if(t.id===parseInt(e.sport_id)&&e.high_stakes==="true"===t.high_stakes())return r=t}),r||(r=new Live.Models.Sport({id:e.sport_id,name:e.sport_name,title:e.sport_title,high_stakes:e.high_stakes}),window.menu_view&&window.menu_view.expanded_sports().indexOf(parseInt(e.sport_id))>-1&&!r.high_stakes()&&r.checked(!0),window.menu_view&&window.menu_view.expanded_hsports().indexOf(parseInt(e.sport_id))>-1&&r.high_stakes()&&r.checked(!0),window.menu_view&&window.menu_view.menu_expanded_sports().indexOf(parseInt(e.sport_id))>-1&&!r.high_stakes()&&r.menu_expanded(!0),window.menu_view&&window.menu_view.menu_expanded_hsports().indexOf(parseInt(e.sport_id))>-1&&r.high_stakes()&&r.menu_expanded(!0),t.sports.push(r)),n=new Live.Models.MenuEvent({id:e.id,title:e.title,date_start:e.date_start,high_stakes:e.high_stakes,max_amount:e.max_amount,has_stream:e.has_stream,stream_source:e.stream_source,high_stakes:e.high_stakes},r),window.menu_view&&window.menu_view.expanded_events().indexOf(parseInt(e.id))>-1&&n.checked(!0),r.checked()&&t.expanded_events.length===0&&(n.checked(!0),t.expanded_events().indexOf(n.id)<0&&t.expanded_events.push(n.id)),window.menu_view&&window.menu_view.expanded_sports()[0]===1001&&e.has_stream==="true"&&(e.stream_source==="img_dge"||e.stream_source==="perform")&&n.checked(!0),r.menu_events.push(n)}),t.sports.sort(function(e,t){var n,r,i,s,o,u,a,f,l=this;return s=e.high_stakes(),f=t.high_stakes(),i=[],e.menu_events().forEach(function(e){return i.push(e.max_amount)}),a=[],t.menu_events().forEach(function(e){return a.push(e.max_amount)}),n=Math.max.apply(null,i),o=Math.max.apply(null,a),r=e.id,u=t.id,s===f?n===o?r===u?0:r<u?-1:1:n<o?1:-1:s>f?-1:1}),t.sports().forEach(function(e){return e.menu_events.sort(function(e,t){var n,r,i,s,o,u;return n=e.max_amount,s=t.max_amount,i=moment(e.date_start()).unix(),u=moment(t.date_start()).unix(),r=e.id,o=t.id,n===s?i===u?r===o?0:r<o?-1:1:i<u?-1:1:n<s?1:-1})})},this.fill_data(e),$("#live-menu.async-menu").show()}return e}()}.call(this),function(){Live.Views.Sports=function(){function e(e){var t=this;this.current_title=ko.observable(gon.all_sports),this.current_id=ko.observable(0),this.sports=ko.observableArray([]),this.set_current=function(e){return t.current_id(e),$.cookie("current_sport",e),t.sports().forEach(function(n){return n.id===e?(n.active(!0),t.current_title(n.title)):n.active(!1)})},this.fill_data=function(e){var n,r,i,s;return n=new Live.Models.MenuSport({id:0,name:"all",title:gon.all_sports,active:!1}),s=!1,t.current_id()===0?r=!1:r=!0,i=$.cookie("current_sport"),t.sports.push(n),e.forEach(function(e){t.current_id()===parseInt(e.id)&&(r=!1),e=new Live.Models.MenuSport({id:parseInt(e.id),name:e.name,title:e.title,active:!1}),parseInt(i)===parseInt(e.id)&&(e.active(!0),s=!0);if(e.id!==1001||e.id===1001&&gon.is_lsg_lt)return t.sports.push(e)}),s||t.sports()[0].active(!0),r&&(window.menu_view.expanded_events([]),window.menu_view.expanded_sports([]),window.menu_view.expanded_hsports([]),t.set_current(0),window.renderer.update()),t.sports.sort(function(e,t){return e.id>t.id?1:-1})},this.fill_data(e),$("#sports_view").show()}return e}()}.call(this),function(){Live.Views.Upcoming=function(){function e(e){var t=this;this.odd_format=$.cookie("event_odd_format"),this.odd_format==null&&(this.odd_foramt="eu"),this.sports=ko.observableArray([]),this.upcoming_sport_id=ko.observable(window.upcoming_sport),this.reorderSports=function(){this.sports.sort(function(e,t){var n,r,i,s,o,u,a,f,l=this;return i=[],e.events().forEach(function(e){return i.push(moment(e.date_start()).unix())}),r=Math.min.apply(null,i),a=[],t.events().forEach(function(e){return a.push((new moment(e.date_start())).unix())}),u=Math.min.apply(null,a),s=r,f=u,n=parseInt(e.id),o=parseInt(t.id),s===f?n<o?-1:n>o?1:0:s<f?-1:1});if(this.sports().length>0)return this.sports()[0].first(!0)},this.fill_data=function(e){if(e.sports){e.sports.forEach(function(e){return t.sports.push(new Live.Models.Sport(e,t))});if(t.sports().length>0)return t.sports()[0].first(!0)}},this.fill_data(e),$("#liveBetting").show(),this.sportIdChanged=function(e,t){var n,r;return t.originalEvent?(r=window.upcoming_sport,r||(r=$("#upcoming-sport-select option:first").val()),n=e.upcoming_sport_id(),window.upcoming_sport=n,!n||n===r?!1:($("#liveBetting #live_sport_"+r).addClass("hidden"),$("#liveBetting #live_sport_"+n).removeClass("hidden"))):e.upcoming_sport_id(window.upcoming_sport)}}return e}()}.call(this);